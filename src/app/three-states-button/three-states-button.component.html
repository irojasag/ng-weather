<ng-container *ngIf="stateObservable | async; let state;">
  <button class="btn btn-primary" [ngClass]="{
    'disabled': state === buttonStates.WORKING,
    'btn-success': state === buttonStates.DONE,
    'btn-primary': state !== buttonStates.DONE
  }">
    <ng-content *ngIf="state === buttonStates.DEFAULT" select="[default]"></ng-content>
    <ng-content *ngIf="state === buttonStates.WORKING" select="[working]"></ng-content>
    <ng-content *ngIf="state === buttonStates.DONE" select="[done]"></ng-content>
    <img [hidden]="state !== buttonStates.WORKING" src="https://c.tenor.com/5o2p0tH5LFQAAAAi/hug.gif" width="16" alt="Loading">
  </button>
</ng-container>